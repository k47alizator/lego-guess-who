<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGO Zgadnij Kto To!</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: #1a1a1a; color: white; text-align: center; margin: 0; padding: 20px; 
        }
        h1 { color: #ffcc00; text-shadow: 2px 2px #000; }
        #menu { 
            background: #333; padding: 20px; border-radius: 15px; 
            margin: 0 auto 20px auto; border: 3px solid #ffcc00; max-width: 800px;
        }
        button { 
            background: #444; color: white; border: 2px solid #ffcc00; 
            padding: 10px 15px; margin: 5px; border-radius: 8px; 
            cursor: pointer; transition: 0.3s; font-weight: bold;
        }
        button:hover { background: #ffcc00; color: black; }
        #character-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
            gap: 15px; padding: 20px; max-width: 1200px; margin: 0 auto; 
        }
        .card { 
            background: white; color: black; padding: 10px; border-radius: 10px; 
            cursor: pointer; transition: 0.2s; box-shadow: 0 4px 8px rgba(0,0,0,0.5); 
        }
        .card.hidden { opacity: 0.15; filter: grayscale(100%) brightness(50%); }
        .cat-btn {
            padding: 12px 18px; background: #444; color: white; border: 2px solid #555;
            border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.2s ease;
            min-width: 140px;
        }
        .cat-btn:hover { background: #00ff00; color: black; transform: scale(1.05); }
    </style>
</head>
<body>

    <div id="menu">
        <h1 style="font-size: 3em; margin-bottom: 10px;">LEGO GUESS WHO</h1>

        <div id="setup-view" style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 30px;">
            <div style="background: #2a2a2a; padding: 25px; border: 3px solid #0088ff; border-radius: 20px; width: 300px;">
                <h3 style="color: #0088ff; margin-top: 0;">STW√ìRZ GRƒò</h3>
                <button onclick="createGame()" style="background: #0088ff; color: white; width: 100%; font-size: 18px; padding: 15px; border-radius: 10px; border: none;">GENERUJ KOD</button>
            </div>
            <div style="background: #2a2a2a; padding: 25px; border: 3px solid #ffcc00; border-radius: 20px; width: 300px;">
                <h3 style="color: #ffcc00; margin-top: 0;">DO≈ÅƒÑCZ DO GRY</h3>
                <input type="text" id="room-input" placeholder="WPISZ KOD" style="padding: 12px; border-radius: 8px; width: 85%; text-align: center; font-size: 18px; margin-bottom: 15px; background: #eee; color: black;">
                <button onclick="joinGame()" style="background: #ffcc00; color: black; width: 100%; font-size: 18px; padding: 15px; border-radius: 10px; border: none;">DO≈ÅƒÑCZ</button>
            </div>
        </div>

        <div id="lobby-view" style="display: none; margin-top: 20px;">
            <div style="background: #333; padding: 20px; border-radius: 15px; border: 2px solid #00ff00; display: inline-block;">
                <p style="margin: 0; color: #bbb;">KOD TWOJEGO POKOJU:</p>
                <h2 id="display-code" style="margin: 10px 0; font-size: 40px; font-family: monospace; color: white;">---</h2>
                <button onclick="copyRoomLink()" style="font-size: 12px; background: #555;">Skopiuj Link dla znajomego</button>
            </div>
            <h3 style="margin: 20px 0;">Wybierz kategoriƒô:</h3>
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;">
                <button class="cat-btn" onclick="initGame('LEGO STAR WARS')">Star Wars</button>
                <button class="cat-btn" onclick="initGame('LEGO INIEMAMOCNI')">Iniemamocni</button>
                <button class="cat-btn" onclick="initGame('LEGO BATMAN (1-3)')">Batman</button>
                <button class="cat-btn" onclick="initGame('LEGO NINJAGO')">Ninjago</button>
                <button class="cat-btn" onclick="initGame('MIX')" style="background: orange; color: black;">TRYB MIX</button>
            </div>
        </div>
    </div>

    <div id="game-area" style="display:none;">
        <div style="background: #333; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #ffcc00; display: inline-block;">
            <h2 style="margin: 0;">Twoja postaƒá to: <span id="target-name" style="color: #ffcc00;">...</span></h2>
        </div>
        <div>
            <button onclick="location.reload()">‚Üê WR√ìƒÜ DO MENU</button>
        </div>
        <div id="character-grid"></div>
    </div>

<script>
    const githubConfig = {
        user: "k47alizator",
        repo: "lego-guess-who",
        folder: "img"
    };

    function createGame() {
        const randomCode = "LEGO-" + Math.floor(100 + Math.random() * 899);
        document.getElementById('room-input').value = randomCode;
        enterLobby(randomCode);
    }

    function joinGame() {
        const code = document.getElementById('room-input').value.trim();
        if (code === "") return alert("Najpierw wpisz kod!");
        enterLobby(code);
    }

    function enterLobby(code) {
        document.getElementById('setup-view').style.display = 'none';
        document.getElementById('lobby-view').style.display = 'block';
        document.getElementById('display-code').innerText = code.toUpperCase();
    }

    function copyRoomLink() {
        const code = document.getElementById('display-code').innerText;
        const url = window.location.origin + window.location.pathname + "?room=" + encodeURIComponent(code);
        navigator.clipboard.writeText(url).then(() => alert("Link skopiowany!"));
    }

    function initGame(category) {
        const grid = document.getElementById('character-grid');
        const targetNameDisplay = document.getElementById('target-name');
        const roomCode = document.getElementById('display-code').innerText;
        
        let characterPool = [];
        if (category === "MIX") {
            Object.keys(db).forEach(k => characterPool = characterPool.concat(db[k]));
        } else {
            characterPool = db[category] || [];
        }

        if (characterPool.length === 0) return alert("B≈ÇƒÖd: Brak postaci w tej kategorii!");

        grid.innerHTML = '';
        
        // Seedowanie (identyczny uk≈Çad planszy)
        let seed = 0;
        for(let i=0; i<roomCode.length; i++) seed += roomCode.charCodeAt(i);
        const seededRandom = () => {
            seed = (seed * 9301 + 49297) % 233280;
            return seed / 233280;
        };

        let shuffled = [...characterPool].sort(() => seededRandom() - 0.5);
        const selectedCharacters = shuffled.slice(0, 24);

        // Losowanie unikalnego celu
        const targetIndex = Math.floor(Math.random() * selectedCharacters.length);
        targetNameDisplay.innerText = selectedCharacters[targetIndex].n;

        selectedCharacters.forEach(char => {
            const fileName = encodeURIComponent(char.n) + ".jpg";
            const urlGithub = `https://raw.githubusercontent.com/${githubConfig.user}/${githubConfig.repo}/main/${githubConfig.folder}/${fileName}`;
            const cleanName = char.n.replace(/\(.*\)/, '').trim();
            const urlInternet = `https://tse2.mm.bing.net/th?q=lego+${encodeURIComponent(cleanName)}+minifigure&w=200&h=300&c=7&rs=1&p=0&dpr=1&pid=1.7`;

            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div style="position: relative; height: 140px; background: #eee; border-radius: 5px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                    <img class="main-img" src="${urlGithub}" style="max-width: 100%; max-height: 100%; object-fit: contain;">
                    <button class="dl-btn" style="display:none; position: absolute; bottom: 0; width: 100%; background: #28a745; color: white; border: none; font-size: 10px; padding: 5px; cursor: pointer;">üì• ZAPISZ DO IMG</button>
                </div>
                <p style="margin-top: 8px; font-weight: bold; font-size: 12px; color: black;">${char.n}</p>
            `;

            const imgTag = card.querySelector('.main-img');
            const dlBtn = card.querySelector('.dl-btn');

            imgTag.onerror = function() {
                if (imgTag.src !== urlInternet) {
                    imgTag.src = urlInternet;
                    dlBtn.style.display = "block";
                }
            };

            dlBtn.onclick = (e) => {
                e.stopPropagation();
                const a = document.createElement('a');
                a.href = urlInternet; a.download = char.n + ".jpg";
                a.click();
            };

            card.onclick = () => card.classList.toggle('hidden');
            grid.appendChild(card);
        });

        document.getElementById('menu').style.display = 'none';
        document.getElementById('game-area').style.display = 'block';
    }

    // --- TUTAJ TWOJA BAZA POSTACI (KONTROLUJ CZY JEST DOBRZE ZAMKNIƒòTA) ---
db["LEGO STAR WARS"] = [
    // --- LUKE SKYWALKER ---
    {n:"Luke Skywalker (z Tatooine)"}, {n:"Luke Skywalker (Pilot X-Wing)"}, {n:"Luke Skywalker (z Bespin)"}, {n:"Luke Skywalker (z Dagobah)"}, {n:"Luke Skywalker (Rycerz Jedi)"}, {n:"Luke Skywalker (z Endor)"}, {n:"Luke Skywalker (Szturmowiec)"}, {n:"Luke Skywalker (z Hoth)"}, {n:"Luke Skywalker (Ceremonia)"}, {n:"Luke Skywalker (Stary Luke)"}, {n:"Luke Skywalker (z Crait)"}, {n:"Luke Skywalker (Duch Mocy)"}, {n:"Luke Skywalker (Zbiornik Bacta)"}, {n:"Luke Skywalker (Pilot ≈ömigacza)"},
    
    // --- ANAKIN & VADER ---
    {n:"Darth Vader"}, {n:"Darth Vader (Bez Maski)"}, {n:"Darth Vader (Zniszczony)"}, {n:"Darth Vader (≈öwiƒÖteczny)"}, {n:"Anakin Skywalker (Dziecko)"}, {n:"Anakin Skywalker (Padawan)"}, {n:"Anakin Skywalker (Rycerz Jedi)"}, {n:"Anakin Skywalker (Sith)"}, {n:"Anakin Skywalker (Duch Mocy)"}, {n:"Anakin Skywalker (Pilot Podracera)"}, {n:"Anakin Skywalker (W kurtce)"},
    
    // --- OBI-WAN KENOBI ---
    {n:"Obi-Wan Kenobi (Padawan)"}, {n:"Obi-Wan Kenobi (Epizod 2)"}, {n:"Obi-Wan Kenobi (Epizod 3)"}, {n:"Obi-Wan Kenobi (Stary Ben)"}, {n:"Obi-Wan Kenobi (Duch Mocy)"}, {n:"Obi-Wan Kenobi (Wojny Klon√≥w)"},
    
    // --- HAN SOLO & LEIA ---
    {n:"Han Solo (z Tatooine)"}, {n:"Han Solo (z Hoth)"}, {n:"Han Solo (z Endor)"}, {n:"Han Solo (z Bespin)"}, {n:"Han Solo (M≈Çody)"}, {n:"Han Solo (Stary)"}, {n:"Han Solo (Szturmowiec)"}, {n:"Han Solo (W Karbonicie)"}, {n:"Han Solo (W przebraniu)"},
    {n:"Ksiƒô≈ºniczka Leia (Senator)"}, {n:"Ksiƒô≈ºniczka Leia (z Hoth)"}, {n:"Ksiƒô≈ºniczka Leia (z Bespin)"}, {n:"Ksiƒô≈ºniczka Leia (Niewolnica)"}, {n:"Ksiƒô≈ºniczka Leia (z Endor)"}, {n:"Ksiƒô≈ºniczka Leia (Boushh)"}, {n:"Genera≈Ç Leia Organa"}, {n:"Leia (z wioski Ewok√≥w)"},
    
    // --- INNI JEDI I MISTRZOWIE ---
    {n:"Mistrz Yoda"}, {n:"Yoda (Duch Mocy)"}, {n:"Mace Windu"}, {n:"Qui-Gon Jinn"}, {n:"Kit Fisto"}, {n:"Plo Koon"}, {n:"Aayla Secura"}, {n:"Ki-Adi-Mundi"}, {n:"Luminara Unduli"}, {n:"Shaak Ti"}, {n:"Eeth Koth"}, {n:"Saesee Tiin"}, {n:"Agen Kolar"}, {n:"Adi Gallia"}, {n:"Ahsoka Tano (Padawan)"}, {n:"Ahsoka Tano (Wojny Klon√≥w)"}, {n:"Ahsoka Tano (Doros≈Ça)"}, {n:"Jocasta Nu"}, {n:"Mistrzyni Yaddle"}, {n:"Barriss Offee"},
    
    // --- SITH I Z≈ÅOCZY≈ÉCY ---
    {n:"Darth Maul"}, {n:"Darth Maul (Cyborg)"}, {n:"Imperator Palpatine"}, {n:"Kanclerz Palpatine"}, {n:"Darth Sidious"}, {n:"Hrabia Dooku"}, {n:"Genera≈Ç Grievous"}, {n:"Asajj Ventress"}, {n:"Savage Opress"}, {n:"Wielki Inkwizytor"}, {n:"Si√≥dma Siostra"}, {n:"PiƒÖty Brat"}, {n:"√ìsmy Brat"}, {n:"Kylo Ren"}, {n:"Kylo Ren (Bez Maski)"}, {n:"Naczelny W√≥dz Snoke"}, {n:"Kapitan Phasma"}, {n:"Genera≈Ç Hux"},

    // --- ARMIA KLON√ìW ---
    {n:"Klon (Faza 1)"}, {n:"Klon (Faza 2)"}, {n:"Kapitan Rex"}, {n:"Komandor Cody"}, {n:"Komandor Gree"}, {n:"Komandor Fox"}, {n:"Komandor Neyo"}, {n:"≈ªo≈Çnierz ARC"}, {n:"Pilot Klon"}, {n:"Klon Snajper"}, {n:"Klon z 501. Legionu"}, {n:"Klon z 212. Batalionu"}, {n:"Klon z Watahy"}, {n:"Hunter (Parch)"}, {n:"Wrecker (Parch)"}, {n:"Tech (Parch)"}, {n:"Echo (Parch)"}, {n:"Crosshair (Parch)"},
    
    // --- IMPERIUM (Szturmowcy) ---
    {n:"Szturmowiec Imperium"}, {n:"Szturmowiec Pustynny"}, {n:"Szturmowiec ≈önie≈ºny"}, {n:"Zwiadowca Imperium"}, {n:"Szturmowiec ≈ömierci"}, {n:"Szturmowiec Nadbrze≈ºny"}, {n:"Szturmowiec G√≥rski"}, {n:"Szturmowiec Patrolowy"}, {n:"Szturmowiec B≈Çotny"}, {n:"Pilot My≈õliwca TIE"}, {n:"Pilot AT-AT"}, {n:"Gwardzista Imperialny"}, {n:"Wielki Moff Tarkin"}, {n:"Dyrektor Krennic"}, {n:"Admira≈Ç Piett"}, {n:"Genera≈Ç Veers"}, {n:"Oficer Imperialny"}, {n:"Pilot Floty Imperialnej"},
    
    // --- ≈ÅOWCY NAGR√ìD I NAJEMNICY ---
    {n:"Boba Fett"}, {n:"Jango Fett"}, {n:"Greedo"}, {n:"Bossk"}, {n:"Dengar"}, {n:"IG-88"}, {n:"Zuckuss"}, {n:"4-LOM"}, {n:"Aurra Sing"}, {n:"Cad Bane"}, {n:"Embo"}, {n:"Zam Wesell"}, {n:"Fennec Shand"}, {n:"Din Djarin (Mandalorianin)"}, {n:"Greef Karga"}, {n:"Kuiil"},
    
    // --- DROIDY ---
    {n:"R2-D2"}, {n:"C-3PO"}, {n:"BB-8"}, {n:"R5-D4"}, {n:"R4-P17"}, {n:"Chopper (C1-10P)"}, {n:"K-2SO"}, {n:"IG-11"}, {n:"D-O"}, {n:"Gonk Droid"}, {n:"Robot Mysz"}, {n:"Droid Bojowy B1"}, {n:"Droid Ochroniarz B1"}, {n:"Droid Dow√≥dca B1"}, {n:"Droid Pilot B1"}, {n:"Super Droid Bojowy B2"}, {n:"Droideka"}, {n:"Droid Komandos"}, {n:"Magnaguard"}, {n:"Droid Zwiadowczy"},
    
    // --- MIESZKA≈ÉCY GALAKTYKI ---
    {n:"Jabba the Hutt"}, {n:"Wicket (Ewok)"}, {n:"Logray"}, {n:"Admira≈Ç Ackbar"}, {n:"Nien Nunb"}, {n:"Bib Fortuna"}, {n:"Stra≈ºnik Gamorrea≈Ñski"}, {n:"Jar Jar Binks"}, {n:"Watto"}, {n:"Sebulba"}, {n:"Maz Kanata"}, {n:"Babu Frik"}, {n:"Poggle Mniejszy"}, {n:"Wat Tambor"},

    // --- PILOCI I RUCH OPORU ---
    {n:"Wedge Antilles"}, {n:"Biggs Darklighter"}, {n:"Dak Ralter"}, {n:"Jek Porkins"}, {n:"Zev Senesca"}, {n:"Ten Numb"}, {n:"Pilot B-Winga"}, {n:"Pilot A-Winga"}, {n:"Pilot U-Winga"}, {n:"Snap Wexley"}, {n:"Tallie Lintra"}, {n:"Ello Asty"},
    {n:"Rey (z Jakku)"}, {n:"Rey (Str√≥j Ruchu Oporu)"}, {n:"Rey (Trening Jedi)"}, {n:"Rey (z Kijimi)"}, {n:"Finn (z Jakku)"}, {n:"Finn (W kombinezonie)"}, {n:"Finn (Oficer Najwy≈ºszego PorzƒÖdku)"}, {n:"Rose Tico"}, {n:"Rose Tico (Technik)"}, {n:"Admira≈Ç Holdo"}, {n:"Kaydel Ko Connix"}, {n:"Zorii Bliss"}, {n:"Jannah"}, {n:"Lor San Tekka"},

    // --- NAJWY≈ªSZY PORZƒÑDEK ---
    {n:"Szturmowiec Najwy≈ºszego PorzƒÖdku"}, {n:"Ciƒô≈ºki Szturmowiec"}, {n:"Szturmowiec z miotaczem ognia"}, {n:"Szturmowiec ≈önie≈ºny FO"}, {n:"Pilot TIE Si≈Ç Specjalnych"}, {n:"Szturmowiec Kat"}, {n:"Szturmowiec Odrzutowy"}, {n:"Szturmowiec Sith√≥w"}, {n:"Gwardzista Pretoria≈Ñski"}, {n:"Rycerz Ren (Vicrul)"}, {n:"Rycerz Ren (Cardo)"}, {n:"Rycerz Ren (Ushar)"}, {n:"Rycerz Ren (Kuruk)"}, {n:"Rycerz Ren (Trudgen)"}, {n:"Rycerz Ren (Ap'lek)"},

    // --- SERIALE I INNE ---
    {n:"Ezra Bridger"}, {n:"Kanan Jarrus"}, {n:"Hera Syndulla"}, {n:"Sabine Wren"}, {n:"Zeb Orrelios"}, {n:"Agent Kallus"}, {n:"Wielki Admira≈Ç Thrawn"}, {n:"Inkwizytor"}, {n:"Grogu (Baby Yoda)"}, {n:"Moff Gideon"}, {n:"Bo-Katan Kryze"}, {n:"Cara Dune"}, {n:"Mandalorianin (Din Djarin)"}, {n:"Cobb Vanth"}, {n:"Krrsantan"}, {n:"Mon Mothma"}, {n:"Bail Organa"}, {n:"Admira≈Ç Ackbar"}, {n:"Bib Fortuna"}, {n:"Figrin D'an"}, {n:"Ponda Baba"}, {n:"Dr. Evazan"}, {n:"Lobot"}, {n:"Malakili (Opiekun Rancora)"}, {n:"Oola"}
];

    db["LEGO MARVEL / AVENGERS"] = [
    // --- IRON MAN & TONY STARK ---
    {n:"Iron Man (MK 1)"}, {n:"Iron Man (MK 5)"}, {n:"Iron Man (MK 6)"}, {n:"Iron Man (MK 42)"}, {n:"Iron Man (MK 43)"}, {n:"Iron Man (MK 45)"}, {n:"Iron Man (MK 50)"}, {n:"Hulkbuster"}, {n:"Tony Stark"}, {n:"Tony Stark (W podkoszulku)"}, {n:"Superior Iron Man"},
    
    // --- CAPTAIN AMERICA & FRIENDS ---
    {n:"Kapitan Ameryka"}, {n:"Kapitan Ameryka (Bez maski)"}, {n:"Kapitan Ameryka (WW2)"}, {n:"Kapitan Ameryka (Sam Wilson)"}, {n:"Zimowy ≈ªo≈Çnierz"}, {n:"Zimowy ≈ªo≈Çnierz (W masce)"}, {n:"Bucky Barnes"}, {n:"Falcon"}, {n:"Falcon (Klasyczny)"},
    
    // --- SPIDER-MAN UNIVERSE ---
    {n:"Spider-Man (Peter Parker)"}, {n:"Spider-Man (Miles Morales)"}, {n:"Spider-Gwen"}, {n:"Spider-Ham (PajƒÖk-Chrum)"}, {n:"Spider-Man 2099"}, {n:"Spider-Man (Noir)"}, {n:"Spider-Man (Symbiot)"}, {n:"Spider-Man (Iron Spider)"}, {n:"Venom"}, {n:"Agent Venom"}, {n:"Carnage"}, {n:"Anti-Venom"},
    
    // --- AVENGERS & S.H.I.E.L.D. ---
    {n:"Thor"}, {n:"Thor (Ragnarok)"}, {n:"Thor (Klasyczny)"}, {n:"Potƒô≈ºna Thor (Jane Foster)"}, {n:"Hulk"}, {n:"Bruce Banner"}, {n:"She-Hulk"}, {n:"Czerwony Hulk (Red Hulk)"}, {n:"Czarna Wdowa"}, {n:"Czarna Wdowa (Szary str√≥j)"}, {n:"Hawkeye"}, {n:"Ronin (Hawkeye)"}, {n:"Nick Fury"}, {n:"Maria Hill"}, {n:"Agent Coulson"}, {n:"Vision"}, {n:"Scarlet Witch"}, {n:"Quicksilver"}, {n:"Ant-Man (Scott Lang)"}, {n:"Ant-Man (Hank Pym)"}, {n:"Wasp (Osa)"}, {n:"Czarna Pantera"}, {n:"Shuri"}, {n:"Okoye"},
    
    // --- X-MEN & FANTASTIC FOUR ---
    {n:"Wolverine"}, {n:"Wolverine (BrƒÖzowy str√≥j)"}, {n:"Logan"}, {n:"Cyclops"}, {n:"Storm"}, {n:"Jean Grey"}, {n:"Phoenix"}, {n:"Beast (Bestia)"}, {n:"Professor X"}, {n:"Magneto"}, {n:"Mystique"}, {n:"Sabretooth (Szablozƒôbny)"}, {n:"Deadpool"}, {n:"Deadpool (X-Force)"}, {n:"Gwenpool"}, {n:"Mr. Fantastic"}, {n:"Niewidzialna Kobieta"}, {n:"Ludzka Pochodnia"}, {n:"Thing (Stw√≥r)"}, {n:"Doktor Doom"}, {n:"Silver Surfer"},

    // --- GUARDIANS OF THE GALAXY ---
    {n:"Star-Lord"}, {n:"Star-Lord (Szary str√≥j)"}, {n:"Gamora"}, {n:"Drax"}, {n:"Rocket Raccoon (Szop Rocket)"}, {n:"Groot"}, {n:"Groot (Ma≈Çy)"}, {n:"Baby Groot"}, {n:"Yondu"}, {n:"Nebula"}, {n:"Mantis"}, {n:"Adam Warlock"}, {n:"Nova"}, {n:"Cosmo (Kosmiczny pies)"},
    
    // --- COSMIC & MAGIC ENTITIES ---
    {n:"Doktor Strange"}, {n:"Wong"}, {n:"Staro≈ºytna (Ancient One)"}, {n:"Ghost Rider (Johnny Blaze)"}, {n:"Ghost Rider (Robbie Reyes)"}, {n:"Moon Knight"}, {n:"Daredevil"}, {n:"Iron Fist"}, {n:"Luke Cage"}, {n:"Jessica Jones"}, {n:"Punisher"}, {n:"Blade"},
    
    // --- VILLAINS (Z≈ÅOCZY≈ÉCY) ---
    {n:"Thanos"}, {n:"Thanos (Rƒôkawica Niesko≈Ñczono≈õci)"}, {n:"Loki"}, {n:"Loki (W garniturze)"}, {n:"Ultron"}, {n:"Red Skull (Czerwona Czaszka)"}, {n:"Arnim Zola"}, {n:"Baron Zemo"}, {n:"Green Goblin"}, {n:"Doktor Octopus"}, {n:"Sandman"}, {n:"Electro"}, {n:"Mysterio"}, {n:"Vulture (Sƒôp)"}, {n:"Kraven ≈Åowca"}, {n:"Kingpin"}, {n:"Bullseye"}, {n:"M.O.D.O.K."}, {n:"Abomination"}, {n:"Leader"}, {n:"Enchantress"}, {n:"Executioner"}, {n:"Hela"}, {n:"Ronan Oskar≈ºyciel"}, {n:"Ego"},
    
    // --- SPECIAL & FUN ---
    {n:"Stan Lee"}, {n:"Stan Lee (Hulkbuster)"}, {n:"Kaczor Howard"}, {n:"Squirrel Girl"}, {n:"Kapitan Brytania"}, {n:"Agentka Carter"}
];
      
        db["LEGO HARRY POTTER"] = [
    // --- HARRY, RON, HERMIONA (Warianty) ---
    {n:"Harry Potter (Szata szkolna)"}, {n:"Harry Potter (Zadanie Turniejowe)"}, {n:"Harry Potter (Str√≥j do Quidditcha)"}, {n:"Harry Potter (Szaty wyj≈õciowe)"}, {n:"Harry Potter (Zima)"}, {n:"Harry Potter (Pi≈ºama)"}, {n:"Harry Potter (Dolina Godryka)"},
    {n:"Ron Weasley (Szata szkolna)"}, {n:"Ron Weasley (Sweter)"}, {n:"Ron Weasley (Str√≥j do Quidditcha)"}, {n:"Ron Weasley (Szaty wyj≈õciowe)"}, {n:"Ron Weasley (Zima)"}, {n:"Ron Weasley (Kucharz)"},
    {n:"Hermiona Granger (Szata szkolna)"}, {n:"Hermiona Granger (Suknia balowa)"}, {n:"Hermiona Granger (Zima)"}, {n:"Hermiona Granger (Jako kot)"}, {n:"Hermiona Granger (Czerwona suknia)"}, {n:"Hermiona Granger (Gringott)"},
    
    // --- GRYFFINDOR ---
    {n:"Neville Longbottom"}, {n:"Neville (Pi≈ºama)"}, {n:"Ginny Weasley"}, {n:"Ginny (Quidditch)"}, {n:"Fred Weasley"}, {n:"George Weasley"}, {n:"Percy Weasley"}, {n:"Seamus Finnigan"}, {n:"Dean Thomas"}, {n:"Lee Jordan"}, {n:"Oliver Wood"}, {n:"Angelina Johnson"}, {n:"Parvati Patil"},
    
    // --- NAUCZYCIELE I PERSONEL ---
    {n:"Albus Dumbledore"}, {n:"Albus Dumbledore (M≈Çody)"}, {n:"Severus Snape"}, {n:"Snape (W ubraniu babci)"}, {n:"Minerva McGonagall"}, {n:"Rubeus Hagrid"}, {n:"Szalonooki Moody"}, {n:"Remus Lupin"}, {n:"Lupin (Wilko≈Çak)"}, {n:"Gilderoy Lockhart"}, {n:"Horacy Slughorn"}, {n:"Slughorn (Jako fotel)"}, {n:"Filius Flitwick"}, {n:"Pomona Sprout"}, {n:"Sybilla Trelawney"}, {n:"Madam Pomfrey"}, {n:"Madam Hooch"}, {n:"Argus Filch"},
    
    // --- ZAKON FENIKSA I RODZINA ---
    {n:"Sirius Black"}, {n:"Sirius Black (Wiƒôzie≈Ñ)"}, {n:"Arthur Weasley"}, {n:"Molly Weasley"}, {n:"Bill Weasley"}, {n:"Nimfadora Tonks"}, {n:"Kingsley Shacklebolt"}, {n:"Aberforth Dumbledore"}, {n:"James Potter"}, {n:"Lily Potter"},

    // --- SLYTHERIN I ≈öMIERCIO≈ªERCY ---
    {n:"Lord Voldemort"}, {n:"Tom Riddle"}, {n:"Bellatrix Lestrange"}, {n:"Lucius Malfoy"}, {n:"Narcyza Malfoy"}, {n:"Draco Malfoy"}, {n:"Draco (Szata szkolna)"}, {n:"Draco (Quidditch)"}, {n:"Vincent Crabbe"}, {n:"Gregory Goyle"}, {n:"Blaise Zabini"}, {n:"Pansy Parkinson"}, {n:"Marcus Flint"}, {n:"Antonin Dolohov"}, {n:"Fenrir Greyback"}, {n:"Barty Crouch Jr."},
    
    // --- RAVENCLAW ---
    {n:"Luna Lovegood"}, {n:"Luna (Maska lwa)"}, {n:"Luna (Niebieska sukienka)"}, {n:"Cho Chang"}, {n:"Padma Patil"}, {n:"Terry Boot"},
    
    // --- HUFFLEPUFF ---
    {n:"Cedric Diggory"}, {n:"Cedric (Zadanie Turniejowe)"}, {n:"Justin Finch-Fletchley"}, {n:"Hannah Abbott"}, {n:"Susan Bones"}, {n:"Ernie Macmillan"},
    
    // --- MAGICZNE ISTOTY I DUCHY ---
    {n:"Zgredek (Dobby)"}, {n:"Stworek (Kreacher)"}, {n:"Gryfek (Griphook)"}, {n:"Bogrod (Gringott)"}, {n:"Prawie Bezg≈Çowy Nick"}, {n:"Krwawy Baron"}, {n:"Szara Dama"}, {n:"Gruby Mnich"}, {n:"JƒôczƒÖca Marta"}, {n:"Profesor Binns"},
    
    // --- INNE POSTACIE ---
    {n:"Korneliusz Knot"}, {n:"Rufus Scrimgeour"}, {n:"Dolores Umbridge"}, {n:"Wiktor Krum"}, {n:"Fleur Delacour"}, {n:"Madame Maxime"}, {n:"Igor Karkarow"}, {n:"Ksenofilius Lovegood"}, {n:"Rita Skeeter"}, {n:"Stan Shunpike"}, {n:"Dudley Dursley"}, {n:"Vernon Dursley"}, {n:"Petunia Dursley"}
];

    db["LEGO BATMAN (1-3)"] = [
    // --- BATMAN (Warianty Kostium√≥w) ---
    {n:"Batman"}, {n:"Batman (Klasyczny)"}, {n:"Batman (Zbroja Sensor)"}, {n:"Batman (Zbroja Power)"}, {n:"Batman (Zbroja Sonic)"}, {n:"Batman (Zbroja Arctic)"}, {n:"Batman (Zbroja Electricity)"}, {n:"Batman (Zbroja Space)"}, {n:"Batman (Zbroja Scuba)"}, {n:"Batman (Zur-En-Arrh)"}, {n:"Bruce Wayne"}, {n:"Batman (Mroczny Rycerz)"},
    
    // --- RODZINA BATMANA ---
    {n:"Robin"}, {n:"Robin (Klasyczny)"}, {n:"Robin (Str√≥j magnetyczny)"}, {n:"Nightwing"}, {n:"Red Hood"}, {n:"Batgirl"}, {n:"Batwoman"}, {n:"Alfred Pennyworth"}, {n:"Komisarz Gordon"}, {n:"Ace (Pies Batmana)"}, {n:"Huntress (≈Åowczyni)"}, {n:"Azrael"}, {n:"Bat-Mite"}, {n:"Spoiler"},
    
    // --- LIGA SPRAWIEDLIWO≈öCI (JUSTICE LEAGUE) ---
    {n:"Superman"}, {n:"Clark Kent"}, {n:"Superman (Solar Suit)"}, {n:"Wonder Woman"}, {n:"Wonder Woman (New 52)"}, {n:"The Flash (Barry Allen)"}, {n:"The Flash (Wally West)"}, {n:"Green Lantern (Hal Jordan)"}, {n:"Green Lantern (John Stewart)"}, {n:"Aquaman"}, {n:"Cyborg"}, {n:"Martian Manhunter (J'onn J'onzz)"}, {n:"Shazam"}, {n:"Green Arrow"}, {n:"Black Canary"}, {n:"Hawkman"}, {n:"Hawkgirl"}, {n:"Zatanna"}, {n:"Plastic Man"}, {n:"Blue Beetle"}, {n:"Booster Gold"}, {n:"Supergirl"}, {n:"Firestorm"}, {n:"Doctor Fate"}, {n:"Atom"},
    
    // --- INNE LATARNIE (LANTERNS) ---
    {n:"Sinestro"}, {n:"Saint Walker (B≈Çƒôkitna Latarnia)"}, {n:"Atrocitus (Czerwona Latarnia)"}, {n:"Star Sapphire (Fioletowa Latarnia)"}, {n:"Larfleeze (Pomara≈Ñczowa Latarnia)"}, {n:"Indigo-1"}, {n:"Kilowog"},

    // --- THE JOKER & HARLEY QUINN ---
    {n:"Joker"}, {n:"Joker (Tropikalny)"}, {n:"Joker (Pielƒôgniarka)"}, {n:"Joker (Mim)"}, {n:"Harley Quinn"}, {n:"Harley Quinn (Klasyczna)"},
    
    // --- GALERIA ≈ÅOTR√ìW (ROGUES GALLERY) ---
    {n:"Pingwin"}, {n:"Riddler (Zagadka)"}, {n:"Dwie-Twarze"}, {n:"Catwoman (Kobieta-Kot)"}, {n:"Poison Ivy (TrujƒÖcy Bluszcz)"}, {n:"Scarecrow (Strach na wr√≥ble)"}, {n:"Bane"}, {n:"Bane (Do≈Çadowany Venomem)"}, {n:"Mr. Freeze"}, {n:"Killer Croc"}, {n:"Clayface"}, {n:"Ra's al Ghul"}, {n:"Deathstroke"}, {n:"Deadshot"}, {n:"Man-Bat"}, {n:"Mad Hatter (Szalony Kapelusznik)"}, {n:"Killer Frost"}, {n:"Captain Cold"}, {n:"Gorilla Grodd"}, {n:"Reverse-Flash"}, {n:"Black Manta"}, {n:"Solomon Grundy"}, {n:"Killer Moth"}, {n:"Firefly"}, {n:"Hush"}, {n:"Ventrilokwista i Scarface"},

    // --- KOSMICZNI Z≈ÅOCZY≈ÉCY I POTƒò≈ªNI WROGOWIE ---
    {n:"Lex Luthor"}, {n:"Lex Luthor (Zbroja)"}, {n:"Brainiac"}, {n:"Darkseid"}, {n:"General Zod"}, {n:"Doomsday"}, {n:"Lobo"}, {n:"Black Adam"}, {n:"Metallo"}, {n:"Bizarro"}, {n:"Trigon"}, {n:"Mr. Mxyzptlk"}
];
    
    db["LEGO LOTR / HOBBIT"] = [
    // --- DRU≈ªYNA PIER≈öCIENIA ---
    {n:"Frodo Baggins"}, {n:"Frodo (W ubraniu z Shire)"}, {n:"Frodo (Zbroja Orka)"}, {n:"Samwise Gamgee"}, {n:"Sam (Zbroja Orka)"}, {n:"Merry Brandybuck"}, {n:"Merry (Zbroja Rohanu)"}, {n:"Pippin Took"}, {n:"Pippin (Zbroja Gondoru)"}, {n:"Gandalf Szary"}, {n:"Gandalf Bia≈Çy"}, {n:"Aragorn (Obie≈ºy≈õwiat)"}, {n:"Aragorn (Kr√≥l Elessar)"}, {n:"Legolas"}, {n:"Gimli"}, {n:"Boromir"},
    
    // --- KOMPANIA THORINA (KRASNOLUDY) ---
    {n:"Thorin Dƒôbowa Tarcza"}, {n:"Thorin (Miasto na Jeziorze)"}, {n:"Thorin (Kr√≥lewska zbroja)"}, {n:"Balin"}, {n:"Dwalin"}, {n:"Fili"}, {n:"Kili"}, {n:"Oin"}, {n:"Gloin"}, {n:"Dori"}, {n:"Nori"}, {n:"Ori"}, {n:"Bifur"}, {n:"Bofur"}, {n:"Bombur"}, {n:"Dain ≈ªelazna Stopa"}, {n:"Thrain"},
    
    // --- ELFY I LUDZIE ---
    {n:"Elrond"}, {n:"Elrond (Zbroja)"}, {n:"Galadriela"}, {n:"Arwena"}, {n:"Celeborn"}, {n:"Thranduil"}, {n:"Tauriela"}, {n:"Haldir"}, {n:"Gil-galad"}, {n:"Bard ≈Åucznik"}, {n:"Bilbo Baggins (Stary)"}, {n:"Bilbo Baggins (M≈Çody)"}, {n:"Kr√≥l Theoden"}, {n:"Eomer"}, {n:"Eowina"}, {n:"Denethor"}, {n:"Faramir"}, {n:"Isildur"}, {n:"Radagast Bury"}, {n:"Bain"},
    
    // --- Z≈ÅOCZY≈ÉCY I POTWORY ---
    {n:"Sauron"}, {n:"Saruman Bia≈Çy"}, {n:"Czarnoksiƒô≈ºnik z Angmaru (Witch-king)"}, {n:"Nazgul (Upi√≥r Pier≈õcienia)"}, {n:"Nazgul (Wersja jasna/Twilight)"}, {n:"Lurtz"}, {n:"Grima Smoczy Jƒôzyk"}, {n:"Gollum"}, {n:"Smeagol"}, {n:"Azog Plugawiec"}, {n:"Bolg"}, {n:"Wielki Goblin"}, {n:"Rzecznik Saurona"}, {n:"Uruk-hai"}, {n:"Orczy Wojownik"}, {n:"Ork z Mordoru"}, {n:"Ork z Gundabad"}, {n:"Troll Jaskiniowy"}, {n:"Goblin Pisarz"}, {n:"Nekromanta"}, {n:"Kr√≥l Umar≈Çych"}, {n:"≈ªo≈Çnierz Umar≈Çych"}, {n:"Gothmog"}, {n:"Shagrat"}, {n:"Grishnakh"},
    
    // --- INNE POSTACIE ---
    {n:"Barliman Butterbur"}, {n:"R√≥≈ºa Cotton"}, {n:"Gaffer Gamgee (Dziadunio)"}, {n:"W≈Çadca Miasta na Jeziorze"}, {n:"Alfrid"}, {n:"Beorn"}, {n:"Tom Bombadil"}, {n:"Bree Peasant (Mieszkaniec Bree)"}, {n:"Gwaihir (Orze≈Ç)"}
];

    db["LEGO CITY UNDERCOVER"] = [
    // --- CHASE MCCAIN (G≈Ç√≥wne Przebrania) ---
    {n:"Chase McCain (Policjant)"}, {n:"Chase McCain (Z≈Çodziej)"}, {n:"Chase McCain (G√≥rnik)"}, {n:"Chase McCain (Astronauta)"}, {n:"Chase McCain (Rolnik)"}, {n:"Chase McCain (Stra≈ºak)"}, {n:"Chase McCain (Budowniczy)"}, {n:"Chase McCain (Kung Fu)"}, {n:"Chase McCain (Nurek)"}, {n:"Chase McCain (Bielizna)"}, {n:"Chase McCain (Pilot)"},
    
    // --- POLICJA I SOJUSZNICY ---
    {n:"Frank Honey"}, {n:"Ellie Phillips"}, {n:"Natalia Kowalski"}, {n:"Komisarz Dunby"}, {n:"Burmistrz Gleeson"}, {n:"Szeryf Huckleberry"}, {n:"Marion Dunby"}, {n:"Chief Kanui"}, {n:"Chuck Fieri"}, {n:"Barry Smith"}, {n:"Albert Speth"}, {n:"Profesor Kowalski"},
    
    // --- Z≈ÅOCZY≈ÉCY ---
    {n:"Rex Fury"}, {n:"Vinnie Pappalardo"}, {n:"Chan Chuang"}, {n:"Forrest Blackwell"}, {n:"Jimmy Capra"}, {n:"Smokey Fuentes"}, {n:"Sentinel Channing"}, {n:"Carl Walrus"}, {n:"Jedidiah"}, {n:"Moe De Luca"}, {n:"Ludwig Von Krupman"}, {n:"Cornelius Burns"}, {n:"Zack Woodman"},
    
    // --- CYWILE I ZAWODY ---
    {n:"Barbara Babble"}, {n:"Benny Spetz"}, {n:"Bucky Butler"}, {n:"Clutch"}, {n:"Kucharz"}, {n:"Doktor Jones"}, {n:"Eksplorator"}, {n:"Mechanik"}, {n:"Pracownik stacji paliw"}, {n:"Horace Tappleby"}, {n:"Sprzedawca lod√≥w"}, {n:"James Curry"}, {n:"Jethro Hayes"}, {n:"Lola Babbiti"}, {n:"Kustosz muzeum"}, {n:"Prezenter wiadomo≈õci"}, {n:"Starsza pani"}, {n:"Stra≈ºnik wiƒôzienny"}, {n:"Kierowca wy≈õcigowy"}, {n:"Taks√≥wkarz"}, {n:"Ratownik medyczny"},
    
    // --- KOSTIUMY SPECJALNE I POSTACIE "Z JAJEM" ---
    {n:"Mumia"}, {n:"Faraon"}, {n:"Robot"}, {n:"Samuraj"}, {n:"Surfer"}, {n:"Wiking"}, {n:"Cz≈Çowiek z papier-m√¢ch√©"}, {n:"Nind≈ºa"}, {n:"Jaskiniowiec"}, {n:"Leprechaun"}, {n:"Pajacyk w pude≈Çku"}, {n:"Zombie"}, {n:"Kosmonauta (Klasyczny)"}, {n:"Klaun"}, {n:"Magik"}, {n:"Pirat"}, {n:"Rycerz"}, {n:"Goryl (Kostium)"}, {n:"Wilko≈Çak"}, {n:"Wrestler"}, {n:"Spartanin"}, {n:"Elf"}, {n:"Krasnal ogrodowy"}, {n:"≈öwiƒôty Miko≈Çaj"}
];
       
    db["LEGO INDIANA JONES"] = [
    // --- INDIANA JONES (Warianty) ---
    {n:"Indiana Jones"}, {n:"Indiana Jones (Pustynny)"}, {n:"Indiana Jones (Smoking)"}, {n:"Indiana Jones (Profesor)"}, {n:"Indiana Jones (W przebraniu ≈ºo≈Çnierza)"}, {n:"Indiana Jones (Oficer)"}, {n:"Indiana Jones (Stary)"}, {n:"Indiana Jones (≈öwiƒÖtynia Zag≈Çady)"}, {n:"M≈Çody Indiana Jones"},
    
    // --- RODZINA I PRZYJACIELE ---
    {n:"Henry Jones Sr."}, {n:"Marion Ravenwood"}, {n:"Marion (Suknia wieczorowa)"}, {n:"Marion (Kair)"}, {n:"Mutt Williams"}, {n:"Mutt (Kurtka motocyklowa)"}, {n:"Short Round (Kr√≥tki Szpic)"}, {n:"Sallah"}, {n:"Sallah (Pustynny)"}, {n:"Marcus Brody"}, {n:"Jock (Pilot)"}, {n:"Kapitan Katanga"}, {n:"Harold Oxley"}, {n:"Wu Han"}, {n:"Willie Scott"}, {n:"Willie (Piosenkarka)"}, {n:"Willie (Ceremonia)"},
    
    // --- PRZECIWNICY (VILLAINS) ---
    {n:"Rene Belloq"}, {n:"Belloq (Rytualne szaty)"}, {n:"Belloq (D≈ºungla)"}, {n:"Major Toht"}, {n:"Pu≈Çkownik Dietrich"}, {n:"Mola Ram"}, {n:"Chatter Lal"}, {n:"Walter Donovan"}, {n:"Pu≈Çkownik Vogel"}, {n:"Dr Elsa Schneider"}, {n:"Elsa (Oficer)"}, {n:"Irina Spalko"}, {n:"Pu≈Çkownik Dowczenko"}, {n:"Lao Che"}, {n:"Kao Kan"}, {n:"Chen"},
    
    // --- ARMIE I TUBYLCY ---
    {n:"Wojownik Hovitos"}, {n:"Satipo"}, {n:"Barranca"}, {n:"Szerpa (Osi≈Çek)"}, {n:"Zbir z Kairu"}, {n:"Szermierz z Kairu"}, {n:"Bandyta"}, {n:"≈ªo≈Çnierz niemiecki"}, {n:"Oficer niemiecki"}, {n:"Stra≈ºnik niemiecki"}, {n:"≈ªo≈Çnierz z bazookƒÖ"}, {n:"Rycerz Graala"}, {n:"Thuggee (Kultysta)"}, {n:"Kap≈Çan Thuggee"}, {n:"Stra≈ºnik Pankot"}, {n:"≈ªo≈Çnierz radziecki"}, {n:"Oficer radziecki"}, {n:"Wojownik Ugha"}, {n:"Zab√≥jca Ugha"},
    
    // --- INNE I FUN ---
    {n:"Han Solo (Ukryta postaƒá)"}, {n:"≈öwiƒôty Miko≈Çaj"}, {n:"Tancerka"}, {n:"Starszy wioski"}, {n:"Brytyjski dow√≥dca"}, {n:"Pierwszy oficer"}, {n:"Cmentarny wojownik"}, {n:"Wojownik w masce"}
];
    
        db["LEGO PIRACI Z KARAIB√ìW"] = [
    // --- JACK SPARROW (Warianty) ---
    {n:"Jack Sparrow"}, {n:"Jack Sparrow (W√≥dz Pelegostos)"}, {n:"Jack Sparrow (Przeklƒôty)"}, {n:"Jack Sparrow (Kamizelka)"}, {n:"Jack Sparrow (Oficer)"}, {n:"Jack Sparrow (Szkielet)"},
    
    // --- G≈Å√ìWNI BOHATEROWIE ---
    {n:"Will Turner"}, {n:"Will Turner (Bootstrap)"}, {n:"Elizabeth Swann"}, {n:"Elizabeth Swann (Pirat)"}, {n:"Elizabeth Swann (Czerwony p≈Çaszcz)"}, {n:"Elizabeth Swann (Singapur)"}, {n:"Joshamee Gibbs"}, {n:"Anamaria"}, {n:"Pintel"}, {n:"Ragetti"}, {n:"Cotton"}, {n:"Marty"}, {n:"Tia Dalma"}, {n:"Calypso"},
    
    // --- KAPITANOWIE I Z≈ÅOCZY≈ÉCY ---
    {n:"Hektor Barbossa"}, {n:"Barbossa (Przeklƒôty)"}, {n:"Barbossa (Korsarz)"}, {n:"Davy Jones"}, {n:"Maccus"}, {n:"Koleniko"}, {n:"Palifico"}, {n:"Hadras"}, {n:"Clang"}, {n:"Szelma Bill Turner"}, {n:"Czarnobrody"}, {n:"Angelica"}, {n:"Lord Cutler Beckett"}, {n:"James Norrington"}, {n:"Admira≈Ç Norrington"}, {n:"Gubernator Weatherby Swann"}, {n:"Kapitan Sao Feng"}, {n:"Tai Huang"},
    
    // --- ≈ªO≈ÅNIERZE I MARYNARKA ---
    {n:"Murtogg"}, {n:"Mullroy"}, {n:"Porucznik Theodore Groves"}, {n:"Gillette"}, {n:"Hiszpa≈Ñski oficer"}, {n:"Hiszpa≈Ñski ≈ºo≈Çnierz"}, {n:"Kr√≥l Jerzy II"}, {n:"Angielski stra≈ºnik"},
    
    // --- POSTACIE SPECJALNE I STWORZENIA ---
    {n:"Syrena"}, {n:"Tamara (Syrena)"}, {n:"Philip Swift"}, {n:"Hiszpan (The Spaniard)"}, {n:"Kwatermistrz"}, {n:"Kanonier"}, {n:"Kucharz"}, {n:"Pies wiƒôzienny"}, {n:"Ma≈Çpka Jack"}, {n:"Papuga"}, {n:"Wo≈∫nica"}, {n:"Pijany pirat"}, {n:"Szyper"}, {n:"Stary marynarz"},
    
    // --- DODATKOWI PIRACI I ZA≈ÅOGA ---
    {n:"Bootstrap Bill (Przeklƒôty)"}, {n:"Wyvern"}, {n:"Angus"}, {n:"Yeoman"}, {n:"Derrick"}, {n:"Scrum"}, {n:"Garheng"}, {n:"Salaman"}, {n:"Zab√≥jca hiszpa≈Ñski"}, {n:"Pirata z Tortugi"}
];
    
        db["LEGO JURASSIC WORLD"] = [
    // --- PARK JURAJSKI (KLASYKA) ---
    {n:"Alan Grant"}, {n:"Ellie Sattler"}, {n:"Ian Malcolm"}, {n:"John Hammond"}, {n:"Lex Murphy"}, {n:"Tim Murphy"}, {n:"Robert Muldoon"}, {n:"Dennis Nedry"}, {n:"Donald Gennaro"}, {n:"Ray Arnold"},
    
    // --- ≈öWIAT JURAJSKI (JURASSIC WORLD) ---
    {n:"Owen Grady"}, {n:"Owen (Survival)"}, {n:"Claire Dearing"}, {n:"Claire (Laboratorium)"}, {n:"Simon Masrani"}, {n:"Vic Hoskins"}, {n:"Lowery Cruthers"}, {n:"Barry Semb√®ne"}, {n:"Hamada"}, {n:"Zara"}, {n:"Gray Mitchell"}, {n:"Zach Mitchell"}, {n:"Henry Wu"}, {n:"Dr Henry Wu (1993)"}, {n:"Franklin Webb"}, {n:"Zia Rodriguez"}, {n:"Maisie Lockwood"}, {n:"Eli Mills"}, {n:"Ken Wheatley"},
    
    // --- ZAGINIONY ≈öWIAT & JP3 ---
    {n:"Sarah Harding"}, {n:"Nick Van Owen"}, {n:"Eddie Carr"}, {n:"Roland Tembo"}, {n:"Peter Ludlow"}, {n:"Paul Kirby"}, {n:"Amanda Kirby"}, {n:"Eric Kirby"}, {n:"Billy Brennan"}, {n:"Udesky"},
    
    // --- DINOZAURY ---
    {n:"Tyrannosaurus Rex (T-Rex)"}, {n:"Indominus Rex"}, {n:"Indoraptor"}, {n:"Velociraptor (Blue)"}, {n:"Velociraptor (Charlie)"}, {n:"Velociraptor (Delta)"}, {n:"Velociraptor (Echo)"}, {n:"Triceratops"}, {n:"Brachiozaur"}, {n:"Stegozaur"}, {n:"Dilofozaur"}, {n:"Spinozaur"}, {n:"Ankylozaur"}, {n:"Pteranodon"}, {n:"Mozozaur"}, {n:"Gallimim"}, {n:"Kompsognat (Compy)"}, {n:"Pachycefalozaur"}, {n:"Stygimoloch (Stiggy)"}, {n:"Karnozaur"}, {n:"Baryonyks"}, {n:"Atrociraptor"}, {n:"Giganotozaur"}, {n:"Ma≈Ça Beta (Raptor)"},
    
    // --- PERSONEL I INNE ---
    {n:"Pracownik Parku"}, {n:"Stra≈ºnik InGen"}, {n:"Naukowiec InGen"}, {n:"≈ªo≈Çnierz ACU"}, {n:"Weterynarz"}, {n:"Turysta"}, {n:"Pan DNA (Mr. DNA)"}, {n:"Jimmy Fallon"}, {n:"Kierowca ciƒô≈ºar√≥wki"}, {n:"Pilot helikoptera"}
];
    
        db["LEGO PRZYGODA (1 i 2)"] = [
    // --- EMMET (Warianty) ---
    {n:"Emmet (Budowniczy)"}, {n:"Emmet (Pi≈ºama)"}, {n:"Emmet (Mistrz Konstrukcji)"}, {n:"Emmet (Smoking)"}, {n:"Emmet (W kuble na ≈õmieci)"}, {n:"Emmet (W stroju jaszczurki)"}, {n:"Rex Niebezpiecznik"}, {n:"Rex (Z ma≈Çym raptorem)"},
    
    // --- ≈ªYLETA I EKIPA ---
    {n:"≈ªyleta (Wyldstyle)"}, {n:"≈ªyleta (Kaptur na g≈Çowie)"}, {n:"≈ªyleta (Styl westernowy)"}, {n:"≈ªyleta (Kosmos)"}, {n:"Lucy (Apokalipsburg)"}, {n:"Lucy (Skradanie)"}, {n:"Benny (Kosmonauta)"}, {n:"Benny (Z metalowƒÖ rƒôkƒÖ)"}, {n:"Stalowobrody"}, {n:"Stalowobrody (Mini)"}, {n:"Witruwiusz"}, {n:"Witruwiusz (Duch)"}, {n:"Kicia Ro≈ºek"}, {n:"Kicia Ro≈ºek (Gwiezdna)"}, {n:"Kicia Ro≈ºek (Z≈Ça/Angry)"}, {n:"Kicia Ro≈ºek (Chora)"}, {n:"Kicia Ro≈ºek (Biznes)"}, {n:"Batman (LEGO Movie)"},
    
    // --- BIZNES I Z≈ÅOCZY≈ÉCY ---
    {n:"Prezes Biznes"}, {n:"Lord Biznes (Wielkie nogi)"}, {n:"Z≈Çy Glina"}, {n:"Dobry Glina"}, {n:"Mama Glina"}, {n:"Tata Glina"}, {n:"S≈Çodka ≈ªyleta (Sweet Mayhem)"}, {n:"Kr√≥lowa Wisimi I'Powiewa"}, {n:"Genera≈Ç Zadyma"}, {n:"Kosmita DUPLO"}, {n:"Balthazar"},
    
    // --- MIESZKA≈ÉCY KLOCBURGA ---
    {n:"Abraham Lincoln"}, {n:"William Szekspir"}, {n:"Kleopatra"}, {n:"Panczo Villa"}, {n:"Gandalf (Z filmu)"}, {n:"Dumbledore (Z filmu)"}, {n:"Superman (LEGO Movie)"}, {n:"Green Lantern (LEGO Movie)"}, {n:"Wonder Woman (LEGO Movie)"}, {n:"Shaquille O'Neal"}, {n:"Banan"}, {n:"Lodziarz"}, {n:"Cz≈Çowiek Panda"}, {n:"Larry Barista"}, {n:"Calamity Jane"}, {n:"Szeryf Nie-robot"}, {n:"Pilot testowy"}, {n:"Magik"}, {n:"Kobieta Kot (LEGO Movie)"},
    
    // --- POSTACIE Z APOKALIPSBURGA (LEGO MOVIE 2) ---
    {n:"Apokalipsburg Abe"}, {n:"Benny (Zardzewia≈Çy)"}, {n:"Ch≈Çopak z kanalizacji"}, {n:"Surferka (Apokalipsa)"}, {n:"M√≥jka"}, {n:"Wasteland Batman"}, {n:"Mechanik samochodowy"}, {n:"Dzika tancerka"}, {n:"Cz≈Çowiek wafel"}, {n:"Kole≈õ w kostiumie rekina"}, {n:"Nind≈ºa z Klocburga"}
];
    
       db["LEGO NINJAGO"] = [
    // --- G≈Å√ìWNI NINJA (Warianty) ---
    {n:"Lloyd (Zielony Ninja)"}, {n:"Lloyd (Z kapturem)"}, {n:"Lloyd (Kendo)"}, {n:"Lloyd (Str√≥j szkolny)"}, {n:"Z≈Çoty Lloyd"},
    {n:"Kai (Ninja)"}, {n:"Kai (Kendo)"}, {n:"Kai (Str√≥j szkolny)"}, {n:"Kai (Treningowy)"},
    {n:"Jay (Ninja)"}, {n:"Jay (Kendo)"}, {n:"Jay (Str√≥j szkolny)"}, {n:"Jay (Treningowy)"},
    {n:"Cole (Ninja)"}, {n:"Cole (Kendo)"}, {n:"Cole (Str√≥j szkolny)"}, {n:"Cole (Treningowy)"},
    {n:"Zane (Ninja)"}, {n:"Zane (Kendo)"}, {n:"Zane (Str√≥j szkolny)"}, {n:"Zane (Robot/Tytanowy)"},
    {n:"Nya (Ninja)"}, {n:"Nya (Kendo)"}, {n:"Nya (Str√≥j szkolny)"}, {n:"Nya (Ceremonialna)"},
    
    // --- MISTRZOWIE I RODZINA ---
    {n:"Mistrz Wu"}, {n:"Mistrz Wu (M≈Çody)"}, {n:"Mistrz Wu (Kimono)"}, {n:"Lord Garmadon"}, {n:"Lord Garmadon (Klasyczny)"}, {n:"Garmadon (W garniturze)"}, {n:"Garmadon (W d≈ºungli)"}, {n:"Koko"}, {n:"Misako"}, {n:"Pierwszy Mistrz Spinjitzu"},
    
    // --- ARMIA REKIN√ìW (SHARK ARMY) ---
    {n:"Strzelec Armii Rekin√≥w"}, {n:"Zbir Armii Rekin√≥w"}, {n:"Genera≈Ç Armii Rekin√≥w #1"}, {n:"O≈õmiornica (Armia Rekin√≥w)"}, {n:"Wielki Bia≈Çy (Armia Rekin√≥w)"}, {n:"Krab (Armia Rekin√≥w)"}, {n:"≈ªabnica (Armia Rekin√≥w)"}, {n:"Meduza (Armia Rekin√≥w)"}, {n:"M≈Çot (Hammerhead)"}, {n:"Skorupiak (Crusty)"}, {n:"Rozdymka (Puffer)"},
    
    // --- KLASYCZNI WROGOWIE (SERIAL) ---
    {n:"Pythor"}, {n:"Skales"}, {n:"Mistrz Chen"}, {n:"Morro"}, {n:"Nadakhan"}, {n:"Harumi"}, {n:"Kryptor"}, {n:"Samuraj X"},
    
    // --- MIESZKA≈ÉCY NINJAGO CITY ---
    {n:"Burmistrz Ninjago"}, {n:"Dziewczyna N-Pop"}, {n:"Mistrz Sushi"}, {n:"Informatyk (Nerd)"}, {n:"Ch≈Çopak w kostiumie kurczaka"}, {n:"Cz≈Çowiek Hot Dog"}, {n:"Perkusista"}, {n:"Listonosz"}, {n:"Edna Walker"}, {n:"Ed Walker"}, {n:"Dareth (BrƒÖzowy Ninja)"}, {n:"Dr Julien"}, {n:"Ronin"}, {n:"Nelson (Gazeciarz)"},
    
    // --- DUCHY I INNE ---
    {n:"Duch Cole'a"}, {n:"Wojownik cienia"}, {n:"Szkielet Kruncha"}, {n:"Szkielet Nuckal"}, {n:"Szalony naukowiec"}
];
    
        db["LEGO DIMENSIONS"] = [
    // --- STARTER PACK ---
    {n:"Lego Batman"}, {n:"Gandalf"}, {n:"≈ªyleta (Wyldstyle)"},
    
    // --- DC COMICS ---
    {n:"Superman"}, {n:"Wonder Woman"}, {n:"Aquaman"}, {n:"Cyborg"}, {n:"The Flash"}, {n:"Harley Quinn"}, {n:"Joker"}, {n:"Bane"}, {n:"Suicide Squad Harley"},
    
    // --- W≈ÅADCA PIER≈öCIENI ---
    {n:"Legolas"}, {n:"Gimli"}, {n:"Gollum"},
    
    // --- LEGO PRZYGODA ---
    {n:"Emmet"}, {n:"Benny"}, {n:"Kicia Ro≈ºek (Unikitty)"}, {n:"Stalowobrody (Bad Cop)"},
    
    // --- NINJAGO ---
    {n:"Kai"}, {n:"Jay"}, {n:"Cole"}, {n:"Zane"}, {n:"Nya"}, {n:"Sensei Wu"}, {n:"Lloyd"},
    
    // --- THE SIMPSONS ---
    {n:"Homer Simpson"}, {n:"Bart Simpson"}, {n:"Klaun Krusty"},
    
    // --- DOCTOR WHO ---
    {n:"Dwunasty Doktor"}, {n:"Cyberman"},
    
    // --- POWR√ìT DO PRZYSZ≈ÅO≈öCI ---
    {n:"Marty McFly"}, {n:"Doc Brown"},
    
    // --- POGROMCY DUCH√ìW (GHOSTBUSTERS) ---
    {n:"Peter Venkman"}, {n:"Slimer"}, {n:"Stay Puft"}, {n:"Abby Yates"},
    
    // --- PORTAL 2 ---
    {n:"Chell"},
    
    // --- JURASSIC WORLD ---
    {n:"Owen Grady"}, {n:"Stra≈ºnik ACU"},
    
    // --- SCOOBY-DOO ---
    {n:"Scooby-Doo"}, {n:"Kud≈Çaty (Shaggy)"},
    
    // --- MIDWAY ARCADE ---
    {n:"Gamer Kid"},
    
    // --- ADVENTURE TIME ---
    {n:"Finn the Human"}, {n:"Jake the Dog"}, {n:"Marcelina"}, {n:"Kr√≥lewna Grudkowego Kosmosu"},
    
    // --- MISSION: IMPOSSIBLE ---
    {n:"Ethan Hunt"},
    
    // --- HARRY POTTER ---
    {n:"Harry Potter"}, {n:"Lord Voldemort"}, {n:"Hermiona Granger"},
    
    // --- THE A-TEAM ---
    {n:"B.A. Baracus"},
    
    // --- FANTASTYCZNE ZWIERZƒòTA ---
    {n:"Newt Scamander"}, {n:"Tina Goldstein"},
    
    // --- SONIC THE HEDGEHOG ---
    {n:"Sonic the Hedgehog"},
    
    // --- GREMLINY ---
    {n:"Gizmo"}, {n:"Stripe"},
    
    // --- E.T. ---
    {n:"E.T."},
    
    // --- CZARNOKSIƒò≈ªNIK Z OZ ---
    {n:"Z≈Ça Czarownica"},
    
    // --- THE LEGO BATMAN MOVIE ---
    {n:"Batgirl"}, {n:"Robin (LEGO Batman Movie)"}, {n:"Excalibur Batman"},
    
    // --- KNIGHT RIDER ---
    {n:"Michael Knight"},
    
    // --- THE GOONIES ---
    {n:"Sloth"},
    
    // --- LEGO CITY UNDERCOVER ---
    {n:"Chase McCain"},
    
    // --- ATOM√ìWKI (POWERPUFF GIRLS) ---
    {n:"B√≥jka"}, {n:"Bajka"}, {n:"Brawurka"},
    
    // --- TEEN TITANS GO! ---
    {n:"Robin (TTG)"}, {n:"Raven"}, {n:"Bestia (Beast Boy)"}, {n:"Starfire"},
    
    // --- BEETLEJUICE ---
    {n:"Beetlejuice"}
];
    
    db["LEGO INIEMAMOCNI"] = [
    // --- RODZINA PARROW ---
    {n:"Pan Iniemamocny (Bob Parr)"}, 
    {n:"Elastyna (Helen Parr)"}, 
    {n:"Maksymilian Parr (Maks)"}, 
    {n:"Wiola Parr"}, 
    {n:"Jack-Jack (Normalny)"}, 
    {n:"Jack-Jack (Potw√≥r)"}, 
    {n:"Jack-Jack (Ogie≈Ñ)"}, 
    {n:"Jack-Jack (Metal)"},
    
    // --- PRZYJACIELE I SOJUSZNICY ---
    {n:"Mro≈ºon (Lucius Best)"}, 
    {n:"Edna Mode"}, 
    {n:"Rick Dicker"}, 
    {n:"Gazerbeam"}, 
    {n:"Szybkobiegacz"}, 
    {n:"Refleksja (Voyd)"}, 
    {n:"Ceg≈Ça (Brick)"}, 
    {n:"Zgryz (Krushauer)"}, 
    {n:"He-Lectrix"}, 
    {n:"Krzesztand (Screech)"},
    
    // --- Z≈ÅOCZY≈ÉCY ---
    {n:"Syndrom"}, 
    {n:"Mirage"}, 
    {n:"Bomb Voyage"}, 
    {n:"Podkopywacz"}, 
    {n:"Ekranocholik"}, 
    {n:"Pani Atakier"},
    
    // --- INNE POSTACIE I WARIANTY ---
    {n:"Pan Iniemamocny (Z≈Çota Era)"}, 
    {n:"Elastyna (Z≈Çota Era)"}, 
    {n:"Pan Iniemamocny (Retro)"}, 
    {n:"Lucius Best (Cywil)"}, 
    {n:"Tony Rydinger"}, 
    {n:"Bernie Kropp"}, 
    {n:"Gilbert Huph"}, 
    {n:"Kari McKeen"}, 
    {n:"Burmistrz Metroville"}, 
    {n:"Policjant z Metroville"},
    
    // --- DODATKOWI SUPERBOHATEROWIE (Z≈ÅOTA ERA) ---
    {n:"Apogeum"}, 
    {n:"Blazestone"}, 
    {n:"Fylaks"}, 
    {n:"Macroburst"}, 
    {n:"Thunderhead"}, 
    {n:"Universal Man"},

    // --- GO≈öCIE Z PIXARA (CAMEO) ---
    {n:"Chudy (Toy Story)"}, 
    {n:"Zygzak McQueen (Auta)"}, 
    {n:"Merida Waleczna"}, 
    {n:"Miguel (Coco)"}, 
    {n:"Sulley (Potwory i Sp√≥≈Çka)"}
];
    
    // --- KONIEC BAZY DANYCH ---

    // 0. KONFIGURACJA TWOJEGO GITHUBA
    const githubConfig = {
        user: "k47alizator",
        repo: "lego-guess-who",
        folder: "img"
    };

    // 1. FUNKCJE OBS≈ÅUGI POKOJU
    function createGame() {
        const randomCode = "LEGO-" + Math.floor(100 + Math.random() * 899);
        const input = document.getElementById('room-input');
        if(input) input.value = randomCode;
        enterLobby(randomCode);
    }

    function joinGame() {
        const input = document.getElementById('room-input');
        const code = input ? input.value.trim() : "";
        if (code.length < 1) {
            alert("Najpierw wpisz kod od znajomego!");
            return;
        }
        enterLobby(code);
    }

    function enterLobby(code) {
        const setupView = document.getElementById('setup-view');
        const lobbyView = document.getElementById('lobby-view');
        const displayCode = document.getElementById('display-code');
        
        if(setupView) setupView.style.display = 'none';
        if(lobbyView) lobbyView.style.display = 'block';
        if(displayCode) displayCode.innerText = code.toUpperCase();
    }

    // 2. KOPIOWANIE LINKU
    function copyRoomLink() {
        const displayCode = document.getElementById('display-code');
        const code = displayCode ? displayCode.innerText : "";
        const url = window.location.origin + window.location.pathname + "?room=" + encodeURIComponent(code);
        
        navigator.clipboard.writeText(url).then(() => {
            alert("Link skopiowany! Wy≈õlij go znajomemu.");
        });
    }

    // 3. G≈Å√ìWNA LOGIKA GRY
    function initGame(category) {
        const lobbyView = document.getElementById('lobby-view');
        const menu = document.getElementById('menu');
        const gameArea = document.getElementById('game-area');
        const targetNameDisplay = document.getElementById('target-name');
        const grid = document.getElementById('character-grid');
        
        const displayCode = document.getElementById('display-code');
        const roomCode = (displayCode && displayCode.innerText !== "") ? displayCode.innerText : "SOLO";
        
        let characterPool = [];
        if (category === "MIX") {
            Object.keys(db).forEach(key => { characterPool = characterPool.concat(db[key]); });
        } else if (db[category]) {
            characterPool = [...db[category]];
        }

        if (characterPool.length === 0) {
            alert("B≈ÇƒÖd: Nie znaleziono postaci w kategorii: " + category);
            return;
        }

        // SEEDOWANIE
        let seed = 0;
        for(let i=0; i<roomCode.length; i++) seed += roomCode.charCodeAt(i);
        const seededRandom = () => {
            seed = (seed * 9301 + 49297) % 233280;
            return seed / 233280;
        };

        let shuffled = [...characterPool].sort(() => seededRandom() - 0.5);
        const selectedCharacters = shuffled.slice(0, 24);

        const targetIndex = Math.floor(seededRandom() * selectedCharacters.length);
        const targetCharacter = selectedCharacters[targetIndex];
        targetNameDisplay.innerText = targetCharacter.n;

        grid.innerHTML = ''; 

        selectedCharacters.forEach(char => {
            const card = document.createElement('div');
            card.className = 'card';
            
            // ≈öcie≈ºki obrazk√≥w
            const fileName = encodeURIComponent(char.n) + ".jpg";
            const urlGithub = `https://raw.githubusercontent.com/${githubConfig.user}/${githubConfig.repo}/main/${githubConfig.folder}/${fileName}`;
            const cleanName = char.n.replace(/\(.*\)/, '').trim();
            const urlInternet = `https://tse2.mm.bing.net/th?q=lego+${encodeURIComponent(cleanName)}+minifigure&w=200&h=300&c=7&rs=1&p=0&dpr=1&pid=1.7`;

            card.innerHTML = `
                <div class="card-img-wrapper" style="position: relative; height: 140px; background: #f0f0f0; border-radius: 5px; overflow: hidden;">
                    <img class="main-img" src="${urlGithub}" style="width: 100%; height: 100%; object-fit: contain;">
                    <button class="dl-btn" style="display:none; position: absolute; bottom: 0; width: 100%; background: rgba(40, 167, 69, 0.9); color: white; border: none; font-size: 10px; padding: 5px; cursor: pointer; font-weight: bold;">üì• ZAPISZ DO IMG</button>
                </div>
                <p style="margin-top: 8px; font-weight: bold; font-size: 12px; color: black; line-height: 1.2;">${char.n}</p>
            `;

            const imgTag = card.querySelector('.main-img');
            const dlBtn = card.querySelector('.dl-btn');

            // Je≈õli nie ma na GitHubie -> ≈Çaduj z sieci i poka≈º przycisk pobierania
            imgTag.onerror = function() {
                if (imgTag.src !== urlInternet) {
                    imgTag.src = urlInternet;
                    dlBtn.style.display = "block";
                }
            };

            // Pobieranie zdjƒôcia
            dlBtn.onclick = (e) => {
                e.stopPropagation(); // ≈ªeby nie zakry≈Ço karty
                const link = document.createElement('a');
                link.href = urlInternet;
                link.download = char.n + ".jpg";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };
            
            card.onclick = () => card.classList.toggle('hidden');
            grid.appendChild(card);
        });

        if(lobbyView) lobbyView.style.display = 'none';
        if(menu) menu.style.display = 'none';
        gameArea.style.display = 'block';
    }

    function backToMenu() {
        location.reload();
    }

    window.onload = function() {
        const urlParams = new URLSearchParams(window.location.search);
        const roomFromUrl = urlParams.get('room');
        if (roomFromUrl) {
            const input = document.getElementById('room-input');
            if(input) input.value = roomFromUrl;
            enterLobby(roomFromUrl);
        }
    }
</script>
</body>
</html>
